<!DOCTYPE html>
<html lang="mr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baatmi Point V41 - Bottom Precision</title>
    <link href="https://fonts.googleapis.com/css2?family=Khand:wght@700;800&family=Mukta:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root { --bg: #020617; --card: rgba(30, 41, 59, 0.7); --accent: #ffd700; --neon: #38bdf8; --text: #f1f5f9; }
        body { font-family: 'Mukta', sans-serif; background: var(--bg); margin: 0; padding: 0; color: var(--text); }
        
        .header { background: rgba(15, 23, 42, 0.9); padding: 25px; text-align: center; border-bottom: 2px solid var(--neon); backdrop-filter: blur(10px); }
        .header h1 { margin: 0; font-size: 28px; color: var(--neon); font-family: 'Khand', sans-serif; letter-spacing: 2px; text-transform: uppercase; }

        .container { padding: 20px; max-width: 550px; margin: 0 auto; }
        .card { background: var(--card); padding: 25px; border-radius: 24px; border: 1px solid rgba(255,255,255,0.1); margin-bottom: 25px; backdrop-filter: blur(16px); }
        .label { font-size: 14px; font-weight: 800; color: var(--neon); margin-bottom: 15px; display: block; text-transform: uppercase; }

        textarea, input[type="text"] { width: 100%; padding: 18px; border-radius: 14px; border: 1px solid rgba(255,255,255,0.1); background: rgba(15, 23, 42, 0.6); color: #fff; margin-bottom: 12px; outline: none; box-sizing: border-box; font-size: 16px; }

        .color-row { display: flex; gap: 20px; flex-wrap: wrap; justify-content: center; padding: 10px 0; }
        .c-btn { width: 55px; height: 55px; border-radius: 14px; cursor: pointer; border: 3px solid rgba(255,255,255,0.1); transition: 0.3s; }
        .c-btn.active { border-color: #fff; transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.5); }

        .file-label { background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); color: #fff; padding: 18px; border-radius: 14px; display: block; text-align: center; cursor: pointer; font-weight: 700; border: 1px solid rgba(56, 189, 248, 0.2); }
        .btn-gen { background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%); color: #020617; border: none; padding: 22px; border-radius: 20px; font-weight: 900; font-size: 22px; width: 100%; cursor: pointer; font-family: 'Khand', sans-serif; text-transform: uppercase; margin-top: 10px; }

        /* V41 Rendering Engine - Bottom 40% Logic */
        #render-wrap { position: absolute; left: -9999px; }
        #poster { width: 1080px; height: 1080px; background: #000; position: relative; overflow: hidden; border: 10px solid #fff; box-sizing: border-box; }
        #target-img { width: 100%; height: 100%; object-fit: cover; position: absolute; top: 0; left: 0; }
        
        /* ‡§°‡§æ‡§∞‡•ç‡§ï ‡§ó‡•ç‡§∞‡•á‡§°‡§ø‡§Ø‡§Ç‡§ü (‡§ñ‡§æ‡§≤‡•Ç‡§® ‡•´‡•¶% ‡§™‡§∞‡•ç‡§Ø‡§Ç‡§§) */
        .post-overlay { 
            position: absolute; bottom: 0; width: 100%; height: 50%; 
            background: linear-gradient(transparent, rgba(0,0,0,0.95) 45%, #000); 
            z-index: 2;
        }
        
        /* ‡§Æ‡§ú‡§ï‡•Ç‡§∞ ‡§ï‡§Ç‡§ü‡•á‡§®‡§∞ - ‡§§‡§≥‡§æ‡§™‡§æ‡§∏‡•Ç‡§® ‡§¨‡§∞‡•ã‡§¨‡§∞ ‡•™‡•¶% ‡§ú‡§æ‡§ó‡•á‡§§ ‡§Æ‡§∞‡•ç‡§Ø‡§æ‡§¶‡§ø‡§§ */
        .post-content { 
            position: absolute; 
            bottom: 150px; /* ‡§´‡•Å‡§ü‡§∞‡§ö‡•ç‡§Ø‡§æ ‡§µ‡§∞ */
            left: 80px; right: 80px; 
            height: 432px; /* ‡•ß‡•¶‡•Æ‡•¶ ‡§ö‡•á ‡•™‡•¶% = ‡•™‡•©‡•® */
            display: flex; align-items: center; justify-content: center;
            text-align: center; z-index: 5; 
        }
        .post-desc { 
            color: #fff; font-size: 50px; font-weight: 700; line-height: 1.5; 
            text-shadow: 3px 3px 15px rgba(0,0,0,1); 
        }
        .highlight { color: var(--accent); font-family: 'Khand', sans-serif; font-weight: 800; display: inline; }

        .post-footer { 
            position: absolute; bottom: 60px; width: 100%; 
            display: flex; justify-content: center; align-items: center; 
            color: #fff; font-size: 38px; font-family: 'Khand', sans-serif; font-weight: bold; 
            z-index: 10;
        }
    </style>
</head>
<body>

<div class="header"><h1>BAATMI POINT V41</h1></div>

<div class="container">
    <div class="card">
        <span class="label">‚ùØ‚ùØ ‡§¨‡§æ‡§§‡§Æ‡•ç‡§Ø‡§æ‡§Ç‡§ö‡•á ‡§∏‡§Ç‡§™‡§æ‡§¶‡§®</span>
        <textarea id="uDesc" rows="4" placeholder="‡§¨‡§æ‡§§‡§Æ‡•Ä ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡§æ..."></textarea>
        <input type="text" id="uWords" placeholder="‡§π‡§æ‡§Ø‡§≤‡§æ‡§à‡§ü ‡§∂‡§¨‡•ç‡§¶">
    </div>

    <div class="card">
        <span class="label">‚ùØ‚ùØ ‡§π‡§æ‡§Ø‡§≤‡§æ‡§à‡§ü ‡§∞‡§Ç‡§ó</span>
        <div class="color-row">
            <div class="c-btn active" style="background: #ffd700;" onclick="setColor('#ffd700', this)"></div>
            <div class="c-btn" style="background: #38bdf8;" onclick="setColor('#38bdf8', this)"></div>
            <div class="c-btn" style="background: #22c55e;" onclick="setColor('#22c55e', this)"></div>
        </div>
    </div>

    <div class="card">
        <span class="label">‚ùØ‚ùØ ‡§Æ‡•Ä‡§°‡§ø‡§Ø‡§æ ‡§∏‡•ã‡§∞‡•ç‡§∏</span>
        <label class="file-label">üìÅ ‡§´‡•ã‡§ü‡•ã ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡§æ
            <input type="file" id="uFile" accept="image/*" onchange="loadImg(event)" style="display:none;">
        </label>
        <div style="margin-top:15px;"></div>
        <input type="text" id="uWmark" value="@baatmipoint.in">
    </div>

    <button class="btn-gen" id="genBtn" onclick="generate()">‡§≤‡§æ‡§Å‡§ö HD ‡§™‡•ã‡§∏‡•ç‡§ü‡§∞ ‚ú®</button>

    <div id="preview-area" style="display:none; margin-top:35px; text-align:center;">
        <img id="preview" style="width:100%; border-radius:20px; border: 5px solid var(--neon);">
        <a id="saveBtn" style="display:block; background:#10b981; color:white; text-decoration:none; padding:18px; border-radius:15px; font-weight:bold; margin-top:20px;">üì• ‡§ó‡•Ö‡§≤‡§∞‡•Ä‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§∏‡•á‡§µ‡•ç‡§π ‡§ï‡§∞‡§æ</a>
    </div>
</div>

<div id="render-wrap">
    <div id="poster">
        <img id="target-img">
        <div class="post-overlay"></div>
        <div class="post-content"><div id="rt-desc" class="post-desc"></div></div>
        <div class="post-footer"><span id="rt-foot"></span></div>
    </div>
</div>

<script>
    function setColor(hex, btn) {
        document.documentElement.style.setProperty('--accent', hex);
        document.querySelectorAll('.c-btn').forEach(x => x.classList.remove('active'));
        if(btn) btn.classList.add('active');
    }

    function loadImg(e) {
        const reader = new FileReader();
        reader.onload = (event) => { document.getElementById('target-img').src = event.target.result; }
        reader.readAsDataURL(e.target.files[0]);
    }

    async function generate() {
        let text = document.getElementById('uDesc').value;
        const words = document.getElementById('uWords').value.split(',').map(w => w.trim()).filter(w => w !== "");
        const btn = document.getElementById('genBtn');

        if(!document.getElementById('target-img').src || !text.trim()) return alert("‡§´‡•ã‡§ü‡•ã ‡§Ü‡§£‡§ø ‡§Æ‡§ú‡§ï‡•Ç‡§∞ ‡§≠‡§∞‡§æ!");

        words.forEach(word => {
            const regex = new RegExp(word, 'g');
            text = text.replace(regex, `<span class="highlight">${word}</span>`);
        });

        document.getElementById('rt-desc').innerHTML = text;
        document.getElementById('rt-foot').innerText = document.getElementById('uWmark').value;
        
        const el = document.getElementById('rt-desc');
        const container = document.querySelector('.post-content');
        let size = 50; el.style.fontSize = size + 'px';
        while (el.scrollHeight > container.offsetHeight && size > 25) { 
            size--; el.style.fontSize = size + 'px'; 
        }

        btn.innerText = "Processing HD... ‚è≥";
        
        setTimeout(() => {
            html2canvas(document.getElementById('poster'), { scale: 3, useCORS: true, logging: false }).then(canvas => {
                const data = canvas.toDataURL('image/png', 1.0);
                document.getElementById('preview').src = data;
                document.getElementById('preview-area').style.display = "block";
                document.getElementById('saveBtn').href = data;
                document.getElementById('saveBtn').download = "BaatmiPoint_V41.png";
                btn.innerText = "‡§≤‡§æ‡§Å‡§ö HD ‡§™‡•ã‡§∏‡•ç‡§ü‡§∞ ‚ú®";
                window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
            });
        }, 800);
    }
</script>
</body>
</html>
