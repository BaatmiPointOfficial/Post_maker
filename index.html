<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Post Test</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<style>
body{background:#111;color:#fff;font-family:sans-serif;padding:20px}
input,textarea,button{width:100%;margin-bottom:10px;padding:10px}
#box{width:100%;aspect-ratio:1/1;background:#333;position:relative}
#img{width:100%;height:100%;object-fit:cover;display:none}
#text{position:absolute;bottom:0;background:rgba(0,0,0,.7);padding:10px}
</style>
</head>

<body>

<input type="file" id="file">
<input id="title" placeholder="Headline">
<textarea id="desc" placeholder="Description"></textarea>

<button onclick="make()">Create</button>

<div id="box">
  <img id="img">
  <div id="text">
    <div id="t"></div>
    <div id="d"></div>
  </div>
</div>

<button onclick="save()">Save</button>

<script>
function make(){
  const f=document.getElementById("file").files[0];
  if(!f){alert("photo");return;}
  const r=new FileReader();
  r.onload=e=>{
    const i=document.getElementById("img");
    i.src=e.target.result;
    i.style.display="block";
    document.getElementById("t").innerText=document.getElementById("title").value;
    document.getElementById("d").innerText=document.getElementById("desc").value;
  };
  r.readAsDataURL(f);
}

function save(){
  html2canvas(document.getElementById("box")).then(c=>{
    const a=document.createElement("a");
    a.href=c.toDataURL();
    a.download="test.png";
    a.click();
  });
}
</script>

</body>
</html>
