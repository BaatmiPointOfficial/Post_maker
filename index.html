<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Post Creator Pro</title>

<link href="https://fonts.googleapis.com/css2?family=Khand:wght@700&family=Poppins:wght@400;600&family=Noto+Sans+Devanagari&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<style>
:root{
  --yellow:#ffcc00;
  --bg:#0f0f0f;
  --card:#1a1a1a;
  --input:#262626;
}

body{
  margin:0;
  padding:20px;
  background:var(--bg);
  color:#fff;
  font-family:'Poppins',sans-serif;
  display:flex;
  justify-content:center;
}

.app{
  width:100%;
  max-width:480px;
  background:var(--card);
  padding:22px;
  border-radius:22px;
}

h1{
  text-align:center;
  font-family:'Khand';
  color:var(--yellow);
  margin-bottom:20px;
}

/* -------- FORM -------- */

label{
  font-size:11px;
  color:#aaa;
  text-transform:uppercase;
  margin-bottom:6px;
  display:block;
}

input, textarea{
  width:100%;
  padding:14px;
  margin-bottom:14px;
  background:var(--input);
  border:1px solid #333;
  border-radius:12px;
  color:#fff;
}

button{
  width:100%;
  padding:16px;
  border:none;
  border-radius:14px;
  font-family:'Khand';
  font-size:22px;
  background:linear-gradient(135deg,var(--yellow),#f39c12);
  color:#000;
  cursor:pointer;
}

/* -------- CANVAS -------- */

#canvas{
  margin-top:24px;
  width:100%;
  aspect-ratio:1/1;
  background:#222;
  border-radius:18px;
  overflow:hidden;
  position:relative;
}

#photo{
  width:100%;
  height:100%;
  object-fit:cover;
  object-position:center top;
  display:none;
}

/* -------- OVERLAY -------- */

.overlay{
  position:absolute;
  bottom:0;
  left:0;
  width:100%;
  height:55%;
  padding:20px;
  background:rgba(0,0,0,0.75);
  display:none;
  display:flex;
  flex-direction:column;
  justify-content:flex-start;
}

/* -------- TEXT -------- */

.headline{
  font-family:'Khand','Noto Sans Devanagari',sans-serif;
  font-size:32px;
  line-height:1.15;
  margin-bottom:10px;
  color:#fff;
  text-shadow:0 2px 6px rgba(0,0,0,0.6);
}

.desc{
  font-size:15px;
  line-height:1.4;
  color:#eaeaea;
  text-shadow:0 1px 4px rgba(0,0,0,0.5);
}

/* Yellow highlight */
.hl{
  color:var(--yellow);
}

/* -------- WATERMARK -------- */

.handle{
  position:absolute;
  bottom:10px;
  right:14px;
  font-size:12px;
  font-weight:600;
  color:var(--yellow);
  text-shadow:0 1px 3px rgba(0,0,0,0.6);
}

/* -------- SAVE -------- */

#saveBtn{
  margin-top:14px;
  background:#27ae60;
  color:#fff;
  display:none;
}
</style>
</head>

<body>
<div class="app">

<h1>Post Creator Pro</h1>

<label>Photo</label>
<input type="file" id="imageInput" accept="image/*">

<label>Headline (*highlight* ‡§ï‡•á ‡§≤‡§ø‡§è)</label>
<input id="headlineInput" placeholder="‡§∏‡§Ç‡§ú‡§Ø ‡§∞‡§æ‡§ä‡§§ ‡§®‡•á *‡§≠‡§æ‡§ú‡§™‡§æ* ‡§ï‡•ã ‡§ò‡•á‡§∞‡§æ">

<label>Description</label>
<textarea id="descInput" rows="3"></textarea>

<label>Handle</label>
<input id="handleInput" value="@baatmipoint">

<button onclick="createPost()">Create Post</button>

<div id="canvas">
  <img id="photo">
  <div id="overlay" class="overlay">
    <div id="outHeadline" class="headline"></div>
    <div id="outDesc" class="desc"></div>
    <div id="outHandle" class="handle"></div>
  </div>
</div>

<button id="saveBtn" onclick="saveImage()">Save Image</button>

</div>

<script>
function formatText(text){
  return text.replace(/\*(.*?)\*/g,'<span class="hl">$1</span>');
}

function createPost(){
  const fileInput = document.getElementById("imageInput");
  const file = fileInput.files[0];

  if(!file){
    alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§´‡•ã‡§ü‡•ã ‡§ö‡•Å‡§®‡•á‡§Ç");
    return;
  }

  const img = document.getElementById("photo");
  const reader = new FileReader();

  /* üîë MOBILE SAFE LOGIC */
  img.onload = function(){
    img.style.display = "block";

    document.getElementById("overlay").style.display = "flex";

    document.getElementById("outHeadline").innerHTML =
      formatText(document.getElementById("headlineInput").value);

    document.getElementById("outDesc").innerHTML =
      formatText(document.getElementById("descInput").value);

    document.getElementById("outHandle").innerText =
      document.getElementById("handleInput").value.trim() || "@baatmipoint";

    document.getElementById("saveBtn").style.display = "block";
  };

  reader.onload = function(e){
    /* src LAST ‡§Æ‡•á‡§Ç set */
    img.src = e.target.result;
  };

  reader.readAsDataURL(file);
}

function saveImage(){
  const btn = document.getElementById("saveBtn");
  btn.disabled = true;
  btn.innerText = "Saving...";

  html2canvas(document.getElementById("canvas"),{
    scale:3,
    backgroundColor:null
  }).then(canvas=>{
    canvas.toBlob(blob=>{
      const url = URL.createObjectURL(blob);
      const a=document.createElement("a");
      a.href=url;
      a.download="Post_"+Date.now()+".png";
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);

      btn.disabled=false;
      btn.innerText="Save Image";
    });
  });
}
</script>

</body>
</html>
