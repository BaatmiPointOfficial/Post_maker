<!DOCTYPE html>
<html lang="mr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baatmi Point Pro - V11</title>
    <link href="https://fonts.googleapis.com/css2?family=Khand:wght@700&family=MMuktaukta:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root { --gold: #ffcc00; --indigo: #6366f1; --slate: #0f172a; --card-bg: rgba(30, 41, 59, 0.7); }
        
        body { 
            font-family: 'Mukta', sans-serif; 
            background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 100%);
            color: white; margin: 0; padding: 0; min-height: 100vh;
            display: flex; flex-direction: column; align-items: center; 
        }

        .navbar { 
            width: 100%; padding: 20px; text-align: center; 
            background: var(--card-bg); backdrop-filter: blur(12px);
            border-bottom: 2px solid rgba(255, 204, 0, 0.3);
            position: sticky; top: 0; z-index: 100;
        }

        .navbar h1 { margin: 0; font-family: 'Khand', sans-serif; color: var(--gold); font-size: 26px; letter-spacing: 1px; }

        .container { padding: 25px; max-width: 500px; width: 100%; box-sizing: border-box; }

        .glass-card { 
            background: var(--card-bg); backdrop-filter: blur(20px);
            padding: 30px; border-radius: 28px; border: 1px solid rgba(255, 255, 255, 0.1)
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.6);
        }

        .section-label { font-size: 13px; text-transform: uppercase; color: #94a3b8; letter-spacing: 1.5px; font-weight: 800; margin-bottom: 10px; display: block; }

        input[type="file"], textarea { 
            width: 100%; padding: 16px; margin-bottom: 22px; border-radius: 14px; 
            border: 1px solid rgba(255, 255, 255, 0.1); background: rgba(0, 0, 0, 0.3); 
            color: white; font-size: 16px; box-sizing: border-box; transition: 0.3s;
        }

        textarea:focus { border-color: var(--gold); outline: none; background: rgba(0, 0, 0, 0.4); }

        .toggle-box {
            display: flex; align-items: center; justify-content: space-between; 
            background: rgba(255, 255, 255, 0.05); padding: 15px 20px; 
            border-radius: 16px; margin-bottom: 25px; border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .toggle-label { font-weight: bold; font-size: 15px; color: #e2e8f0; }

        .main-btn { 
            background: linear-gradient(90deg, #f59e0b 0%, #ffcc00 100%); 
            color: #000; border: none; padding: 20px; border-radius: 18px; 
            font-weight: 800; font-size: 18px; width: 100%; cursor: pointer; 
            transition: 0.4s; box-shadow: 0 10px 20px rgba(245, 158, 11, 0.3);
        }

        .main-btn:hover { transform: translateY(-3px); box-shadow: 0 15px 25px rgba(245, 158, 11, 0.4); }

        #preview-area { margin-top: 40px; text-align: center; }
        #preview-img { width: 100%; border-radius: 24px; border: 3px solid var(--gold); display: none; margin-bottom: 20px; }
        
        .save-btn { 
            display: none; background: #10b981; color: white; text-decoration: none; 
            padding: 20px; border-radius: 18px; font-weight: bold; text-align: center; font-size: 18px;
            box-shadow: 0 10px 20px rgba(16, 185, 129, 0.3);
        }

        /* Logic Styles - No Changes to Working Layout */
        #render-container { position: absolute; left: -9999px; top: 0; }
        #render-target { width: 1080px; height: 1080px; background: #000; position: relative; overflow: hidden; border: 15px solid white; }
        .post-bg { width: 100%; height: 100%; object-fit: cover; position: absolute; }
        .post-overlay { position: absolute; bottom: 0; width: 100%; height: 60%; background: linear-gradient(transparent, rgba(0,0,0,0.85), rgba(0,0,0,0.98)); }
        .post-content { position: absolute; bottom: 90px; width: 100%; padding: 0 65px; text-align: center; box-sizing: border-box; }
        .post-desc { color: #fff; font-family: 'Khand', sans-serif; font-size: 52px; font-weight: 500; line-height: 1.4; letter-spacing: 0.3px; }
        .highlight { color: var(--gold); font-weight: 700; display: inline-block; padding: 0 6px; margin: 0 2px; letter-spacing: 0.5px; } 
        .post-footer { position: absolute; bottom: 40px; width: 100%; text-align: center; color: white; font-size: 38px; font-weight: bold; display: flex; align-items: center; justify-content: center; gap: 15px; }
    </style>
</head>
<body>

<div class="navbar"><h1>üö© BAATMI POINT PRO V11</h1></div>

<div class="container">
    <div class="glass-card">
        <span class="section-label">STEP 1: Media</span>
        <input type="file" id="uFile" accept="image/*" onchange="loadImg(event)">
        
        <span class="section-label">STEP 2: Content</span>
        <textarea id="uDesc" rows="4" placeholder="‡§§‡•Å‡§Æ‡§ö‡•Ä ‡§¨‡§æ‡§§‡§Æ‡•Ä ‡§≤‡§ø‡§π‡§æ... (‡§π‡§æ‡§Ø‡§≤‡§æ‡§à‡§ü‡§∏‡§æ‡§†‡•Ä * ‡§µ‡§æ‡§™‡§∞‡§æ)"></textarea>
        
        <span class="section-label">STEP 3: Branding</span>
        <div class="toggle-box">
            <span class="toggle-label">‡§µ‡•â‡§ü‡§∞‡§Æ‡§æ‡§∞‡•ç‡§ï (baatmipoint.in)</span>
            <input type="checkbox" id="wMark" checked style="width: 25px; height: 25px; accent-color: #ffcc00;">
        </div>
        
        <button class="main-btn" id="genBtn" onclick="generate()">‡§™‡•ç‡§∞‡•ã‡§´‡•á‡§∂‡§®‡§≤ ‡§™‡•ã‡§∏‡•ç‡§ü ‡§§‡§Ø‡§æ‡§∞ ‡§ï‡§∞‡§æ ‚ú®</button>
    </div>

    <div id="preview-area">
        <img id="preview-img" alt="Preview">
        <a id="saveBtn" class="save-btn">‡§ó‡•Ö‡§≤‡§∞‡•Ä‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§∏‡•á‡§µ‡•ç‡§π ‡§ï‡§∞‡§æ üì•</a>
    </div>
</div>

<div id="render-container">
    <div id="render-target">
        <img id="target-img" class="post-bg">
        <div class="post-overlay"></div>
        <div class="post-content">
            <div id="rt-desc" class="post-desc"></div>
        </div>
        <div id="rt-foot" class="post-footer">
            <span style="font-size: 42px;">üí°</span> baatmipoint.in
        </div>
    </div>
</div>

<script>
    const targetImg = document.getElementById('target-img');
    const previewImg = document.getElementById('preview-img');
    const saveBtn = document.getElementById('saveBtn');

    function loadImg(e) {
        const reader = new FileReader();
        reader.onload = (event) => { targetImg.src = event.target.result; }
        reader.readAsDataURL(e.target.files[0]);
    }

    function parseHighlight(text) {
        return text.replace(/\*(.*?)\*/g, '&nbsp;<span class="highlight">$1</span>&nbsp;');
    }

    async function generate() {
        const desc = document.getElementById('uDesc').value;
        const btn = document.getElementById('genBtn');
        const showWatermark = document.getElementById('wMark').checked;
        
        if(!targetImg.src || desc.trim() === "") return alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§´‡•ã‡§ü‡•ã ‡§Ü‡§£‡§ø ‡§Æ‡§ú‡§ï‡•Ç‡§∞ ‡§≠‡§∞‡§æ!");

        document.getElementById('rt-desc').innerHTML = parseHighlight(desc);
        document.getElementById('rt-foot').style.display = showWatermark ? 'flex' : 'none';

        btn.innerText = "‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏‡§ø‡§Ç‡§ó... ‚è≥";
        btn.disabled = true;

        setTimeout(() => {
            html2canvas(document.getElementById('render-target'), {
                scale: 2, useCORS: true, backgroundColor: "#000", letterRendering: true
            }).then(canvas => {
                canvas.toBlob(function(blob) {
                    const dataUrl = URL.createObjectURL(blob);
                    previewImg.src = dataUrl;
                    previewImg.style.display = "block";
                    saveBtn.href = dataUrl;
                    saveBtn.download = "BaatmiPoint_V11_" + Date.now() + ".png";
                    saveBtn.style.display = "block";
                    btn.innerText = "‡§™‡•ç‡§∞‡•ã‡§´‡•á‡§∂‡§®‡§≤ ‡§™‡•ã‡§∏‡•ç‡§ü ‡§§‡§Ø‡§æ‡§∞ ‡§ï‡§∞‡§æ ‚ú®";
                    btn.disabled = false;
                    previewImg.scrollIntoView({ behavior: 'smooth' });
                }, 'image/png', 1.0);
            });
        }, 500);
    }
</script>
</body>
</html>
