<!DOCTYPE html>
<html lang="mr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Post Maker HD - V10</title>
    <link href="https://fonts.googleapis.com/css2?family=Khand:wght@700&family=Mukta:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root { --accent: #ffcc00; --bg: #0f172a; --card: #1e293b; }
        body { font-family: 'Mukta', sans-serif; background: var(--bg); color: white; margin: 0; padding: 0; display: flex; flex-direction: column; align-items: center; -webkit-font-smoothing: antialiased; }
        .header { background: var(--card); width: 100%; padding: 15px; text-align: center; border-bottom: 3px solid var(--accent); position: sticky; top: 0; z-index: 100; }
        .header h1 { margin: 0; font-size: 22px; color: var(--accent); font-family: 'Khand', sans-serif; letter-spacing: 1px; }
        .main { padding: 20px; max-width: 500px; width: 100%; box-sizing: border-box; }
        .editor { background: var(--card); padding: 20px; border-radius: 15px; border: 1px solid #334155; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .help-text { font-size: 13px; color: var(--accent); margin-bottom: 12px; display: block; font-weight: bold; }
        input[type="file"], textarea { width: 100%; padding: 14px; margin-bottom: 15px; border-radius: 10px; border: 1.5px solid #334155; background: #0f172a; color: white; font-size: 16px; box-sizing: border-box; outline: none; }
        input:focus, textarea:focus { border-color: var(--accent); }
        .option-group { display: flex; align-items: center; gap: 10px; margin-bottom: 15px; background: #0f172a; padding: 12px; border-radius: 10px; border: 1px solid #334155; }
        .btn-gen { background: var(--accent); color: #000; border: none; padding: 16px; border-radius: 12px; font-weight: bold; font-size: 19px; width: 100%; cursor: pointer; transition: 0.3s; box-shadow: 0 4px 15px rgba(255, 204, 0, 0.3); }
        
        #preview-area { margin-top: 25px; text-align: center; width: 100%; }
        #preview-img { width: 100%; border-radius: 12px; border: 4px solid var(--accent); display: none; margin-bottom: 15px; box-shadow: 0 10px 40px rgba(0,0,0,0.5); }
        .download-btn { display: none; background: #10b981; color: white; text-decoration: none; padding: 16px; border-radius: 12px; font-weight: bold; text-align: center; font-size: 19px; }

        /* HD Rendering Engine - V10 */
        #render-container { position: absolute; left: -9999px; top: 0; }
        #render-target { width: 1080px; height: 1080px; background: #000; position: relative; overflow: hidden; border: 20px solid white; text-rendering: optimizeLegibility; }
        .post-bg { width: 100%; height: 100%; object-fit: cover; position: absolute; }
        .post-overlay { position: absolute; bottom: 0; width: 100%; height: 65%; background: linear-gradient(transparent, rgba(0,0,0,0.7) 20%, rgba(0,0,0,0.95) 90%); }
        .post-content { position: absolute; bottom: 110px; width: 100%; padding: 0 70px; text-align: center; box-sizing: border-box; }
        
        /* ‡§∂‡§¨‡•ç‡§¶ ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§µ‡§æ‡§¢‡§µ‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä ‡§´‡•â‡§®‡•ç‡§ü ‡§∏‡§æ‡§à‡§ú ‡•≤‡§°‡§ú‡§∏‡•ç‡§ü ‡§ï‡•á‡§≤‡§æ */
        .post-desc { color: #fff; font-family: 'Mukta', sans-serif; font-size: 50px; font-weight: 700; line-height: 1.5; letter-spacing: 0.2px; text-shadow: 2px 2px 10px rgba(0,0,0,0.5); }
        
        .highlight { 
            color: var(--accent); 
            font-family: 'Khand', sans-serif;
            font-weight: 700; 
            display: inline-block; 
            padding: 0 8px; 
            margin: 0 2px;
            background: rgba(255, 204, 0, 0.1);
            border-radius: 5px;
        } 
        
        .post-footer { position: absolute; bottom: 45px; width: 100%; text-align: center; color: white; font-size: 40px; font-weight: bold; display: flex; align-items: center; justify-content: center; gap: 15px; font-family: 'Khand', sans-serif; }
    </style>
</head>
<body>

<div class="header"><h1>POST MAKER HD V10</h1></div>

<div class="main">
    <div class="editor">
        <label style="font-size: 14px; color: #94a3b8;">‡•ß. ‡§´‡•ã‡§ü‡•ã ‡§®‡§ø‡§µ‡§°‡§æ (HD ‡§´‡•ã‡§ü‡•ã ‡§µ‡§æ‡§™‡§∞‡§æ)</label>
        <input type="file" id="uFile" accept="image/*" onchange="loadImg(event)">
        
        <span class="help-text">üí° ‡§Æ‡§π‡§§‡•ç‡§µ‡§æ‡§ö‡•á ‡§∂‡§¨‡•ç‡§¶ ‡§π‡§æ‡§Ø‡§≤‡§æ‡§à‡§ü ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä * ‡§µ‡§æ‡§™‡§∞‡§æ (‡§â‡§¶‡§æ. *‡§¨‡•ç‡§∞‡•á‡§ï‡§ø‡§Ç‡§ó*)</span>
        <textarea id="uDesc" rows="5" placeholder="‡§¨‡§æ‡§§‡§Æ‡•Ä‡§ö‡§æ ‡§Æ‡§ú‡§ï‡•Ç‡§∞ ‡§á‡§•‡•á ‡§≤‡§ø‡§π‡§æ... (‡§Ü‡§§‡§æ ‡§§‡•Å‡§Æ‡•ç‡§π‡•Ä ‡§ú‡§æ‡§∏‡•ç‡§§ ‡§∂‡§¨‡•ç‡§¶ ‡§≤‡§ø‡§π‡•Ç ‡§∂‡§ï‡§§‡§æ)"></textarea>
        
        <div class="option-group">
            <input type="checkbox" id="wMark" checked>
            <label for="wMark">‡§µ‡•â‡§ü‡§∞‡§Æ‡§æ‡§∞‡•ç‡§ï ‡§ú‡•ã‡§°‡§æ (baatmipoint.in)</label>
        </div>
        
        <button class="btn-gen" id="genBtn" onclick="generate()">HD ‡§™‡•ã‡§∏‡•ç‡§ü ‡§§‡§Ø‡§æ‡§∞ ‡§ï‡§∞‡§æ ‚ú®</button>
    </div>

    <div id="preview-area">
        <img id="preview-img" alt="Preview">
        <a id="saveBtn" class="download-btn">‡§ó‡•Ö‡§≤‡§∞‡•Ä‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§∏‡•á‡§µ‡•ç‡§π ‡§ï‡§∞‡§æ üì•</a>
    </div>
</div>

<div id="render-container">
    <div id="render-target">
        <img id="target-img" class="post-bg">
        <div class="post-overlay"></div>
        <div class="post-content">
            <div id="rt-desc" class="post-desc"></div>
        </div>
        <div id="rt-foot" class="post-footer">
            <span style="font-size: 45px; color: var(--accent);">üö©</span> baatmipoint.in
        </div>
    </div>
</div>

<script>
    const targetImg = document.getElementById('target-img');
    const previewImg = document.getElementById('preview-img');
    const saveBtn = document.getElementById('saveBtn');

    function loadImg(e) {
        const reader = new FileReader();
        reader.onload = (event) => { targetImg.src = event.target.result; }
        reader.readAsDataURL(e.target.files[0]);
    }

    function parseHighlight(text) {
        // ‡§Æ‡§ú‡§ï‡•Ç‡§∞ ‡§Ö‡§ß‡§ø‡§ï ‡§∏‡•ç‡§™‡§∑‡•ç‡§ü ‡§¶‡§ø‡§∏‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä 'Non-breaking space' ‡§µ‡§æ‡§™‡§∞‡§≤‡•Ä ‡§Ü‡§π‡•á
        return text.replace(/\*(.*?)\*/g, '&nbsp;<span class="highlight">$1</span>&nbsp;');
    }

    async function generate() {
        const desc = document.getElementById('uDesc').value;
        const btn = document.getElementById('genBtn');
        const showWatermark = document.getElementById('wMark').checked;
        
        if(!targetImg.src || desc.trim() === "") return alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§´‡•ã‡§ü‡•ã ‡§Ü‡§£‡§ø ‡§Æ‡§ú‡§ï‡•Ç‡§∞ ‡§≠‡§∞‡§æ!");

        document.getElementById('rt-desc').innerHTML = parseHighlight(desc);
        document.getElementById('rt-foot').style.display = showWatermark ? 'flex' : 'none';

        btn.innerText = "Ultra-HD Rendering... ‚è≥";
        btn.disabled = true;
        saveBtn.style.display = "none";
        previewImg.style.display = "none";

        // ‡§Ö‡§ï‡•ç‡§∑‡§∞‡§æ‡§Ç‡§ö‡•ç‡§Ø‡§æ ‡§ï‡•ç‡§≤‡§ø‡§Ö‡§∞‡§ø‡§ü‡•Ä‡§∏‡§æ‡§†‡•Ä ‡§•‡•ã‡§°‡§æ ‡§µ‡•á‡§≥ ‡§¶‡•á‡§ä‡§® ‡§∞‡•á‡§Ç‡§°‡§∞‡§ø‡§Ç‡§ó ‡§ï‡§∞‡§£‡•á
        setTimeout(() => {
            html2canvas(document.getElementById('render-target'), {
                scale: 4, // Higher clarity fix
                useCORS: true,
                backgroundColor: "#000",
                logging: false
            }).then(canvas => {
                const dataUrl = canvas.toDataURL('image/png', 1.0);
                previewImg.src = dataUrl;
                previewImg.style.display = "block";
                saveBtn.href = dataUrl;
                saveBtn.download = "PostMaker_HD_" + Date.now() + ".png";
                saveBtn.style.display = "block";
                btn.innerText = "HD ‡§™‡•ã‡§∏‡•ç‡§ü ‡§§‡§Ø‡§æ‡§∞ ‡§ï‡§∞‡§æ ‚ú®";
                btn.disabled = false;
                previewImg.scrollIntoView({ behavior: 'smooth' });
            }).catch(err => {
                alert("‡§ï‡§æ‡§π‡•Ä‡§§‡§∞‡•Ä ‡§ö‡•Ç‡§ï ‡§ù‡§æ‡§≤‡•Ä. ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•Å‡§®‡•ç‡§π‡§æ ‡§™‡•ç‡§∞‡§Ø‡§§‡•ç‡§® ‡§ï‡§∞‡§æ.");
                btn.disabled = false;
                btn.innerText = "HD ‡§™‡•ã‡§∏‡•ç‡§ü ‡§§‡§Ø‡§æ‡§∞ ‡§ï‡§∞‡§æ ‚ú®";
            });
        }, 800);
    }
</script>
</body>
</html>
